 /* --- Styles from v12 (Unchanged) --- */

        /* Basic Reset & Smooth Scroll */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-family: sans-serif; }
        body { color: #333; line-height: 1.6; background-color: #f8f9fa; }

        .content-body { display: flex; }
        /* Navigation */
        nav {   width: 250px; height: 100vh; background-color: #e9ecef; padding: 20px; border-right: 1px solid #dee2e6; overflow-y: auto; z-index: 1000; }
        nav h2 { margin-bottom: 20px; font-size: 1.2em; color: #495057; }
        nav ul { list-style: none; padding-left: 1rem; }
        nav ul li a { display: block; padding: 10px 0; text-decoration: none; color: white; transition: background-color 0.2s, color 0.2s; border-radius: 4px; padding-left: 10px; margin-bottom: 2px; }
        nav ul li a:hover { background-color: #ced4da; color: #212529; }
        nav ul li a.active { background-color: #007bff; color: white; font-weight: bold; }

        /* Main Content Area */
        main { width: 100%; }

        /* Section Styling */
        section { padding-top: 60px; }
        section:last-child { border-bottom: none; margin-bottom: 0; }
        section h1.section-title { margin-bottom: 30px; color: #0056b3; text-align: center; font-size: 1.8em; } /* Added class */

        /* Firebase Status Bar */
        #firebase-status { padding: 10px 20px; margin: 15px; border: 1px solid #ccc; background-color: #f0f0f0; text-align: center; font-weight: bold; border-radius: 4px; position: sticky; top: 10px; z-index: 999; margin-left: 210px; transition: background-color 0.5s, border-color 0.5s, color 0.5s; }

        /* Common Elements */
        button, .button-link { display: inline-block; padding: 10px 15px; background-color: #007bff; color: white; text-decoration: none; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s, color 0.3s, opacity 0.3s; font-size: 0.9em; text-align: center; vertical-align: middle; margin: 2px; }
        button:hover, .button-link:hover { background-color: #0056b3; }
        button:disabled { background-color: #6c757d; opacity: 0.7; cursor: not-allowed; }
        input[type="text"], input[type="number"], input[type="date"], input[type="time"], input[type="search"], select, textarea { padding: 10px; border: 1px solid #ced4da; border-radius: 4px; font-size: 1em; width: 100%; margin-bottom: 10px; background-color: #fff; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #80bdff; box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); }
        .search-bar { text-align: center; margin-bottom: 30px; }
        .search-bar input[type="text"], .search-bar input[type="search"] { margin-left: 10px; padding: 8px; width: 250px; border: 1px solid #ced4da; border-radius: 4px; vertical-align: middle; display: inline-block; width: auto; }
        .search-bar button { vertical-align: middle; }

        /* Table Styles */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); background-color: #fff; }
        th, td { border: 1px solid #dee2e6; padding: 12px 15px; text-align: left; vertical-align: middle; }
        th { background-color: #f8f9fa; font-weight: 600; font-size: 0.9em; text-transform: uppercase; color: #495057; }
        tbody tr:nth-child(even) { background-color: #f8f9fa; }
        tbody tr:hover { background-color: #e9ecef; }
        td .button-link, td button { font-size: 0.8em; padding: 4px 8px; margin-right: 5px; }
        td[data-label="Status"] { font-weight: bold; }
        td[data-label="Status"][style*="color: red;"] { color: #dc3545 !important; }
        td[data-label="Status"][style*="color: orange;"] { color: #fd7e14 !important; }
        td.status-message { text-align: center !important; font-style: italic; color: #6c757d; padding: 20px; }

        /* List Item Styles (Kept for KB) */
        .list-item { border: 1px solid #dee2e6; padding: 15px 20px; margin-bottom: 10px; border-radius: 4px; background-color: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .list-item h4 { margin-bottom: 5px; font-size: 1.1em; color: #0056b3; }
        .list-item p { font-size: 0.9em; color: #6c757d; margin-bottom: 10px; }
        .list-item a { color: #007bff; text-decoration: none; margin-right: 10px; font-size: 0.9em; }
        .list-item a:hover { text-decoration: underline; }
        .list-item .actions { margin-top: 10px; }
        .list-item .actions button { padding: 5px 10px; font-size: 0.8em; margin-left: 5px; background-color: #6c757d; }
        .list-item .actions button:hover { background-color: #5a6268; }

        /* Settings Styles */
        .settings-group { max-width: 700px; margin: 0 auto 30px auto; border: 1px solid #dee2e6; padding: 25px; border-radius: 5px; background-color: #fff; }
        .settings-group h3 { margin-bottom: 15px; border-bottom: 1px solid #dee2e6; padding-bottom: 10px; font-size: 1.2em; color: #343a40; }
        .form-field-custom label { display: block; margin-bottom: 8px; width: auto; margin-right: 15px; font-size: 0.9em; cursor: pointer; color: #495057; }
        .form-field-custom input[type="checkbox"] { width: auto; margin-right: 8px; vertical-align: middle; transform: scale(1.1); accent-color: #007bff; }
        .form-field-custom input[disabled] + label, .form-field-custom input[disabled] { cursor: not-allowed; opacity: 0.7; }
        .theme-toggle label { display: inline-block; width: auto; margin-right: 10px; font-weight: bold; vertical-align: middle; }
        .theme-toggle button { margin-right: 5px; vertical-align: middle; }
        .settings-group code { background-color: #e9ecef; padding: 2px 5px; border-radius: 3px; font-family: monospace; color: #333; }
        .settings-group pre { margin-top: 10px; background: #f8f9fa; padding: 15px; border-radius: 4px; font-size: 0.8em; max-height: 200px; overflow-y: auto; color: #333; border: 1px solid #dee2e6; }

        /* Dashboard Styles */
        .dashboard-section-header { text-align: center; margin-bottom: 20px; color: #495057; }
        .oee-status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 40px; max-width: 1000px; margin-left: auto; margin-right: auto; }
        .oee-card { border: 1px solid #dee2e6; padding: 15px; border-radius: 5px; background-color: #fff; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .oee-card:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .oee-card h3 { margin-bottom: 8px; font-size: 1em; color: #495057; }
        .oee-value { font-size: 2em; font-weight: bold; display: block; margin-bottom: 5px; }
        .status-good .oee-value { color: #198754; } .status-ok .oee-value { color: #ffc107; } .status-bad .oee-value { color: #dc3545; }
        .oee-card .status-label { font-size: 0.8em; text-transform: uppercase; font-weight: bold; }
        .status-good .status-label { color: #198754; } .status-ok .status-label { color: #b88b00; } .status-bad .status-label { color: #dc3545; }
        .historical-data { margin-top: 40px; padding-top: 30px; border-top: 1px solid #dee2e6; max-width: 1200px; margin-left: auto; margin-right: auto; }
        .historical-data h2 { text-align: center; margin-bottom: 15px; color: #495057; }
        .timeframe-selector { margin-bottom: 30px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .timeframe-selector label { font-weight: bold; width: auto; margin-bottom: 0; }
        .timeframe-selector select { padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; width: auto; min-width: 250px; margin-bottom: 0; background-color: white; }
        .charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-top: 20px; }
        .chart-container { border: 1px solid #dee2e6; padding: 20px; border-radius: 8px; background: #fff; min-height: 350px; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.07); }
        .chart-container h3 { margin-bottom: 20px; text-align: center; font-size: 1.1em; color: #495057; width: 100%; }
        .chart-container canvas { max-width: 100%; max-height: 280px; width: 100% !important; height: auto !important; }
        .apq-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; width: 100%; }
        .apq-item { text-align: center; } .apq-item h4 { font-size: 0.9em; margin-bottom: 5px; color: #6c757d; }
        .apq-item img { width: 100px; height: 100px; border: 1px dashed #ced4da; border-radius: 50%; margin: 0 auto; display: block; }
        .chart-container.apq-charts { min-height: fit-content; }

        /* Production Form & Log Styles */
        .production-form-container, .production-log-container { max-width: 1100px; margin: 20px auto; padding: 35px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid #dee2e6; }
        .production-form-container h2, .production-log-container h2 { text-align: center; margin-bottom: 30px; color: #343a40; position: relative; font-size: 1.5em; }
        .toggle-view-btn { position: absolute; top: -10px; right: 0; padding: 8px 12px; font-size: 0.9em; background-color: #6c757d; }
        .toggle-view-btn:hover { background-color: #5a6268; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px 30px; margin-bottom: 30px; }
        .form-field { display: flex; flex-direction: column; }
        .form-field label { margin-bottom: 8px; font-weight: 600; font-size: 0.9em; color: #495057; }
        .form-field input:read-only { background-color: #e9ecef; cursor: not-allowed; border-color: #ced4da; }
        .form-buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 30px; padding-top: 25px; border-top: 1px solid #dee2e6; }
        .form-buttons button { padding: 12px 20px; font-size: 1em; }
        .save-btn { background-color: #0d6efd; } .save-btn:hover { background-color: #0b5ed7; }
        .toggle-label-btn { background-color: #6f42c1; } .toggle-label-btn:hover { background-color: #5a32a3; }
        .print-btn { background-color: #198754; } .print-btn:hover { background-color: #157347; }
        .label-preview-container { margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6; display: block; }
        .label-preview-container.hidden { display: none; }
        .label-preview-container h3 { text-align: center; margin-bottom: 15px; color: #495057; }
        .label-preview { max-width: 320px; min-height: 180px; margin: 0 auto; padding: 20px; border: 1px dashed #adb5bd; background-color: #f8f9fa; font-family: 'Courier New', Courier, monospace; font-size: 0.95em; line-height: 1.5; text-align: left; white-space: pre-wrap; overflow-wrap: break-word; box-shadow: inset 0 0 5px rgba(0,0,0,0.05); color: #212529; }
        .label-preview strong { display: inline-block; min-width: 80px; font-weight: bold; }
        .production-log-container table { margin-top: 10px; }
        .production-log-container.hidden, .production-form-container.hidden { display: none; }

        /* Labeling System Styles */
        /* #labeling .label-toolbar { padding: 15px; margin-bottom: 30px; background-color: #e9ecef; border-radius: 5px; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 10px; }
        #labeling .label-toolbar label { font-weight: bold; margin-right: 5px; }
        #labeling .label-toolbar select { padding: 8px 12px; width: auto; min-width: 150px; margin-right: 15px; }
        #labeling .label-toolbar button { background-color: #6c757d; }
        #labeling .label-toolbar button:hover { background-color: #5a6268; }
        #labeling #currently-selected-component { font-style: italic; color: #0056b3; font-weight: bold; margin-left: 15px; }
        .component-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; max-width: 1000px; margin: 30px auto; }
        .component-button { background-color: #28a745; color: white; padding: 20px; border: none; border-radius: 8px; font-size: 1.1em; text-align: center; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s; }
        .component-button:hover { transform: translateY(-3px); box-shadow: 0 6px 10px rgba(0,0,0,0.15); }
        .component-button span { display: block; font-size: 0.9em; margin-top: 8px; opacity: 0.9; }
        .component-button.selected { background-color: #218838; box-shadow: inset 0 0 10px rgba(0,0,0,0.2); transform: scale(0.98); } */

        /* Modal Styles */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 1050; justify-content: center; align-items: center; }
        .modal-overlay.visible { display: flex; }
        .modal-content { background-color: #fff; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); position: relative; display: flex; flex-direction: column; width: 90%;  max-height: 90vh; overflow: auto; }
        .modal-header { padding: 15px 20px; border-bottom: 1px solid #dee2e6; display: flex; justify-content: space-between; align-items: center; }
        .modal-header h3 { margin: 0; font-size: 1.3em; color: #495057; }
        .modal-close-btn { border: none; background: none; font-size: 1.8em; font-weight: bold; color: #6c757d; cursor: pointer; padding: 0 5px; line-height: 1; opacity: 0.7; }
        .modal-close-btn:hover { opacity: 1; color: #343a40; }
        .modal-body { padding: 20px; overflow-y: auto; flex-grow: 1; }
        .modal-footer { padding: 15px 20px; border-top: 1px solid #dee2e6; display: flex; justify-content: flex-end; gap: 10px; }
        .modal-footer button { padding: 8px 15px; }
        #label-preview-modal .modal-body { display: grid; grid-template-columns: 300px 1fr; gap: 30px; }
        .label-settings-col h4, .label-info-col h4 { margin-bottom: 15px; font-size: 1.1em; color: #343a40; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .label-settings-col .form-field label { margin-bottom: 5px; font-size: 0.9em; }
        .label-settings-col .form-field { margin-bottom: 15px; }
        .label-settings-col input[type="number"], .label-settings-col select { width: auto; min-width: 100px; display: inline-block; margin-right: 10px; }
        .label-info-col p { margin-bottom: 8px; font-size: 0.95em; }
        .label-info-col strong { display: inline-block; min-width: 90px; font-weight: 600; color: #495057; }
        .label-actual-preview { border: 2px dashed #adb5bd; padding: 10px; margin-top: 15px; min-height: 300px; position: relative; overflow: hidden; background-color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: space-between; }
        .label-actual-preview img.qr-code { max-width: 120px; height: auto; margin: 10px 0; }
        .label-actual-preview .label-text { font-family: 'Arial Narrow', Arial, sans-serif; font-weight: bold; text-align: center; }
        .label-actual-preview .label-text.vertical { writing-mode: vertical-rl; text-orientation: mixed; transform: rotate(180deg); font-size: 2.2em; letter-spacing: -2px; margin: 0 10px; white-space: nowrap; }
        .label-actual-preview .label-details { text-align: center; font-size: 0.85em; line-height: 1.4; }
        .label-actual-preview .label-details strong { font-weight: normal; }
        .scan-settings { margin-bottom: 20px; }
        .scan-settings label { margin-right: 15px; }
        .scan-results-area { min-height: 150px; border: 1px solid #ced4da; background-color: #f8f9fa; padding: 10px; font-family: monospace; font-size: 0.9em; white-space: pre-wrap; overflow-y: auto; }
        #simulated-scan-button { background-color: #ffc107; color: #333; margin-top: 10px; }
        .history-filters { display: flex; flex-wrap: wrap; gap: 15px; align-items: center; padding: 15px; background-color: #f8f9fa; border-radius: 4px; margin-bottom: 20px; }
        .history-filters label { margin-bottom: 0; width: auto; }
        .history-filters select, .history-filters input[type="date"] { width: auto; min-width: 150px; margin-bottom: 0; }
        .history-table-container { max-height: 50vh; overflow-y: auto; }
        #label-history-table th, #label-history-table td { font-size: 0.85em; padding: 8px 10px; }

        /* Troubleshooting Guide Styles */
        #troubleshooting .troubleshooting-container { max-width: 800px; margin: 20px auto; padding: 30px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #dee2e6; }
        #troubleshooting .back-link { display: inline-block; margin-bottom: 25px; color: #007bff; text-decoration: none; font-weight: 500; }
        #troubleshooting .back-link:hover { text-decoration: underline; }
        #troubleshooting h2 { font-size: 1.6em; margin-bottom: 20px; color: #343a40; }
        #troubleshooting h3 { font-size: 1.2em; margin-top: 25px; margin-bottom: 10px; color: #495057; }
        #troubleshooting select { margin-bottom: 20px; background-color: #fff; }
        #troubleshooting .troubleshooting-steps { border: 1px solid #ced4da; background-color: #fff; padding: 20px; border-radius: 5px; margin-top: 10px; max-height: 300px; overflow-y: auto; }
        #troubleshooting .troubleshooting-steps label { display: block; margin-bottom: 10px; cursor: pointer; }
        #troubleshooting .troubleshooting-steps input[type="checkbox"] { margin-right: 10px; transform: scale(1.1); accent-color: #007bff; vertical-align: middle;}
        #troubleshooting .troubleshooting-actions { margin-top: 25px; display: flex; justify-content: space-between; gap: 15px; }
        #troubleshooting .troubleshooting-actions button { flex-grow: 1; padding: 12px 20px; font-size: 1em; }
        #troubleshooting .resolve-btn { background-color: #28a745; }
        #troubleshooting .resolve-btn:hover { background-color: #218838; }
        #troubleshooting .escalate-btn { background-color: #dc3545; }
        #troubleshooting .escalate-btn:hover { background-color: #c82333; }
        #ts-fault-selector-group, #ts-steps-group { display: none; }

        /* SOP Manager Styles */
        #sop { padding: 0; }
        .sop-manager-layout { display: flex; height: calc(100vh - 60px); }
        .sop-sidebar { width: 280px; border-right: 1px solid #dee2e6; background-color: #f8f9fa; padding: 20px; display: flex; flex-direction: column; overflow-y: auto; }
        .sop-sidebar h3 { font-size: 1.3em; margin-bottom: 15px; color: #343a40; }
        .sop-sidebar .filter-group { margin-bottom: 15px; }
        .sop-sidebar .filter-group label { display: block; margin-bottom: 5px; font-size: 0.9em; font-weight: 500; }
        .sop-sidebar .filter-group input, .sop-sidebar .filter-group select { margin-bottom: 0; }
        .sop-list { list-style: none; margin: 15px 0; padding: 0; flex-grow: 1; overflow-y: auto; border: 1px solid #dee2e6; background-color: #fff; border-radius: 4px; }
        .sop-list li { padding: 10px 12px; border-bottom: 1px solid #eee; cursor: pointer; transition: background-color 0.2s; font-size: 0.95em; }
        .sop-list li:last-child { border-bottom: none; }
        .sop-list li:hover { background-color: #e9ecef; }
        .sop-list li.active { background-color: #007bff; color: white; font-weight: bold; }
        .sop-sidebar-actions { display: flex; gap: 10px; margin-top: 15px; }
        .sop-sidebar-actions button { flex-grow: 1; }
        .sop-viewer { flex-grow: 1; padding: 30px; overflow-y: auto; position: relative; background-color: #fff; }
        .sop-viewer-welcome { text-align: center; margin-top: 10vh; color: #6c757d; }
        .sop-viewer-content { /* Hidden until SOP selected */ }
        .sop-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .sop-header-title h2 { margin: 0 0 5px 0; font-size: 1.8em; color: #0056b3; }
        .sop-header-title p { margin: 0; font-size: 1em; color: #6c757d; }
        .sop-header-actions button { font-size: 0.85em; padding: 6px 12px; }
        .sop-step-navigation { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 25px; }
        .sop-step-navigation button { background-color: #6c757d; }
        .sop-step-navigation button:hover { background-color: #5a6268; }
        .sop-step-navigation span { font-weight: bold; font-size: 1.1em; }
        .sop-step-content { border: 1px solid #dee2e6; border-radius: 5px; padding: 25px; background-color: #f8f9fa; min-height: 300px; margin-bottom: 25px; }
        .sop-step-content h4 { margin: 0 0 10px 0; font-size: 1.4em; }
        .sop-step-content p { margin-bottom: 15px; line-height: 1.7; }
        .sop-step-content .critical-step { color: #dc3545; font-weight: bold; margin-bottom: 10px; font-size: 1.1em; }
        .sop-step-media { text-align: center; margin-top: 20px; }
        .sop-step-media img, .sop-step-media .pdf-placeholder { max-width: 100%; height: auto; max-height: 400px; border: 1px solid #ccc; padding: 5px; background-color: #fff; }
        .pdf-placeholder { display: block; height: 400px; background-color: #e9ecef; color: #6c757d; display: flex; align-items: center; justify-content: center; font-style: italic; }
        .sop-feedback { text-align: center; margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px; }
        .sop-feedback button { background-color: #e9ecef; color: #333; margin: 0 5px; }
        .sop-feedback button:hover { background-color: #ced4da; }

        /* SOP Editor Modal Styles */
        #sop-editor-modal .modal-content { max-width: 1200px; }
        #sop-editor-modal .modal-body { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .sop-editor-form h4, .sop-editor-preview h4 { margin-bottom: 15px; font-size: 1.1em; color: #343a40; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .sop-editor-form .form-field label { margin-bottom: 5px; font-weight: 500; }
        .sop-editor-form textarea { min-height: 80px; }
        .sop-editor-steps-list { border: 1px solid #ced4da; min-height: 150px; max-height: 250px; overflow-y: auto; margin-bottom: 15px; border-radius: 4px; }
        .sop-editor-steps-list .step-item { padding: 8px 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .sop-editor-steps-list .step-item:last-child { border-bottom: none; }
        .sop-editor-steps-list .step-item:hover { background-color: #f0f0f0; }
        .sop-editor-steps-list .step-item.selected { background-color: #cfe2ff; }
        .sop-editor-step-editor { border: 1px solid #ccc; padding: 15px; margin-top: 10px; border-radius: 4px; background-color: #f8f9fa; }
        .sop-editor-step-actions button { font-size: 0.85em; padding: 4px 8px; margin-right: 5px; }
        .sop-editor-preview { border: 1px solid #ccc; padding: 20px; background-color: #f8f9fa; border-radius: 5px; }
        .sop-editor-preview .preview-step { border: 1px dashed #aaa; padding: 10px; margin-bottom: 10px; background-color: #fff; }
        .sop-editor-preview .preview-step h5 { font-size: 1em; margin-bottom: 5px; }
        .sop-editor-preview .critical-step { color: #dc3545; font-weight: bold; }

        /* --- Dark Mode Styles --- */
        /* ... All dark mode styles from v12 ... */
        body.dark-mode { background-color: #212529; color: #dee2e6; }
        body.dark-mode nav { background-color: #343a40; border-right-color: #495057; }
        body.dark-mode nav ul li a { color: #dee2e6; }
        body.dark-mode nav ul li a:hover { background-color: #495057; color: #fff; }
        body.dark-mode nav ul li a.active { background-color: #0d6efd; color: white; }
        body.dark-mode section { background-color: #2b3035; border-bottom-color: #495057; box-shadow: none; }
        body.dark-mode section h1.section-title { color: #6cb2eb; } /* Target specific class */
        body.dark-mode #firebase-status { background-color: #495057; border-color: #6c757d; color: #dee2e6; }
        body.dark-mode table { box-shadow: none; background-color: #2b3035; }
        body.dark-mode th, body.dark-mode td { border-color: #4a5056; }
        body.dark-mode th { background-color: #495057; color: #e9ecef; }
        body.dark-mode tbody tr:nth-child(even) { background-color: #343a40; }
        body.dark-mode tbody tr:hover { background-color: #495057; }
        body.dark-mode input, body.dark-mode select, body.dark-mode textarea { background-color: #495057; border-color: #6c757d; color: #dee2e6; }
        body.dark-mode input::placeholder, body.dark-mode textarea::placeholder { color: #adb5bd; }
        body.dark-mode input:focus, body.dark-mode select:focus, body.dark-mode textarea:focus { border-color: #86b7fe; box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25); }
        body.dark-mode .search-bar input[type="text"], body.dark-mode .search-bar input[type="search"] { background-color: #495057; }
        body.dark-mode .list-item { background-color: #343a40; border-color: #495057; box-shadow: none; }
        body.dark-mode .list-item h4 { color: #6cb2eb; } body.dark-mode .list-item p { color: #adb5bd; } body.dark-mode .list-item a { color: #80bdff; }
        body.dark-mode .list-item .actions button { background-color: #5a6268; } body.dark-mode .list-item .actions button:hover { background-color: #6c757d; }
        body.dark-mode .settings-group { background-color: #343a40; border-color: #495057; }
        body.dark-mode .settings-group h3 { color: #e9ecef; border-bottom-color: #495057; }
        body.dark-mode .form-field-custom label { color: #adb5bd; }
        body.dark-mode .settings-group code { background-color: #495057; color: #dee2e6; }
        body.dark-mode .settings-group pre { background: #212529; color: #dee2e6; border-color: #495057; }
        body.dark-mode .oee-card { background-color: #343a40; border-color: #495057; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        body.dark-mode .oee-card h3 { color: #e9ecef; }
        body.dark-mode .historical-data { border-top-color: #495057; } body.dark-mode .historical-data h2 { color: #adb5bd; }
        body.dark-mode .timeframe-selector select { background-color: #495057; border-color: #6c757d; color: #dee2e6; }
        body.dark-mode .chart-container { background-color: #343a40; border-color: #495057; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        body.dark-mode .chart-container h3 { color: #adb5bd; } body.dark-mode .apq-item h4 { color: #adb5bd; }
        body.dark-mode .apq-item img { border-color: #6c757d; opacity: 0.8; } body.dark-mode .chart-container { color: #dee2e6; }
        body.dark-mode .production-form-container, body.dark-mode .production-log-container { background-color: #343a40; box-shadow: 0 4px 12px rgba(0,0,0,0.4); border-color: #495057; }
        body.dark-mode .production-form-container h2, body.dark-mode .production-log-container h2 { color: #e9ecef; }
        body.dark-mode .toggle-view-btn { background-color: #5a6268; } body.dark-mode .toggle-view-btn:hover { background-color: #6c757d; }
        body.dark-mode .form-field label { color: #adb5bd; } body.dark-mode .form-field input:read-only { background-color: #495057; border-color: #6c757d; }
        body.dark-mode .form-buttons { border-top-color: #495057; } body.dark-mode .label-preview-container { border-top-color: #495057; }
        body.dark-mode .label-preview-container h3 { color: #adb5bd; } body.dark-mode .label-preview { background-color: #495057; border-color: #6c757d; color: #dee2e6; box-shadow: inset 0 0 5px rgba(0,0,0,0.2); }
        body.dark-mode td.status-message { color: #adb5bd; }
        body.dark-mode #labeling .label-toolbar { background-color: #343a40; border: 1px solid #495057; }
        body.dark-mode .component-button { background-color: #1e7e34; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        body.dark-mode .component-button.selected { background-color: #155724; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        body.dark-mode .modal-overlay { background-color: rgba(0, 0, 0, 0.75); }
        body.dark-mode .modal-content { background-color: #2b3035; color: #dee2e6; }
        body.dark-mode .modal-header { border-bottom-color: #495057; }
        body.dark-mode .modal-header h3 { color: #e9ecef; }
        body.dark-mode .modal-close-btn { color: #adb5bd; } body.dark-mode .modal-close-btn:hover { color: #f8f9fa; }
        body.dark-mode .modal-footer { border-top-color: #495057; background-color: #343a40; }
        body.dark-mode .label-settings-col h4, body.dark-mode .label-info-col h4 { color: #e9ecef; border-bottom-color: #495057; }
        body.dark-mode .label-info-col strong { color: #adb5bd; }
        body.dark-mode .label-actual-preview { border-color: #6c757d; background-color: #fff; color: #000; /* Keep label preview light */ }
        body.dark-mode .label-actual-preview img.qr-code { filter: none; /* Don't invert QR */ }
        body.dark-mode .scan-results-area { background-color: #343a40; border-color: #6c757d; }
        body.dark-mode .history-filters { background-color: #343a40; }
        body.dark-mode #label-history-table th { background-color: #495057; }
        body.dark-mode #troubleshooting .troubleshooting-container { background-color: #343a40; border-color: #495057; }
        body.dark-mode #troubleshooting .back-link { color: #80bdff; }
        body.dark-mode #troubleshooting h2 { color: #e9ecef; }
        body.dark-mode #troubleshooting h3 { color: #adb5bd; }
        body.dark-mode #troubleshooting select { background-color: #495057; border-color: #6c757d; color: #dee2e6; }
        body.dark-mode #troubleshooting .troubleshooting-steps { border-color: #495057; background-color: #2b3035; }
        body.dark-mode #troubleshooting .troubleshooting-steps label { color: #dee2e6; }
        body.dark-mode .sop-manager-layout { background-color: #2b3035; }
        body.dark-mode .sop-sidebar { background-color: #343a40; border-right-color: #495057; }
        body.dark-mode .sop-sidebar h3 { color: #e9ecef; }
        body.dark-mode .sop-list { border-color: #495057; background-color: #2b3035; }
        body.dark-mode .sop-list li { border-bottom-color: #495057; color: #dee2e6; }
        body.dark-mode .sop-list li:hover { background-color: #495057; }
        body.dark-mode .sop-list li.active { background-color: #0d6efd; color: white; }
        body.dark-mode .sop-viewer { background-color: #2b3035; color: #dee2e6; }
        body.dark-mode .sop-viewer-welcome { color: #adb5bd; }
        body.dark-mode .sop-header { border-bottom-color: #495057; }
        body.dark-mode .sop-header-title h2 { color: #80bdff; }
        body.dark-mode .sop-header-title p { color: #adb5bd; }
        body.dark-mode .sop-step-content { border-color: #495057; background-color: #343a40; }
        body.dark-mode .sop-step-media img, body.dark-mode .pdf-placeholder { border-color: #6c757d; background-color: #495057; }
        body.dark-mode .pdf-placeholder { color: #adb5bd; }
        body.dark-mode .sop-feedback { border-top-color: #495057; }
        body.dark-mode .sop-feedback button { background-color: #495057; color: #dee2e6; }
        body.dark-mode .sop-feedback button:hover { background-color: #5a6268; }
        body.dark-mode #sop-editor-modal .modal-content { background-color: #2b3035; }
        body.dark-mode .sop-editor-form h4, body.dark-mode .sop-editor-preview h4 { color: #e9ecef; border-bottom-color: #495057; }
        body.dark-mode .sop-editor-steps-list { border-color: #495057; }
        body.dark-mode .sop-editor-steps-list .step-item { border-bottom-color: #495057; }
        body.dark-mode .sop-editor-steps-list .step-item:hover { background-color: #3a4045; }
        body.dark-mode .sop-editor-steps-list .step-item.selected { background-color: #0b5ed7; color:white; }
        body.dark-mode .sop-editor-step-editor { border-color: #495057; background-color: #343a40; }
        body.dark-mode .sop-editor-preview { border-color: #495057; background-color: #343a40; }
        body.dark-mode .sop-editor-preview .preview-step { border-color: #6c757d; background-color: #2b3035; }


        /* --- Responsive Styles --- */
        /* ... All responsive styles from v12 ... */
        @media (max-width: 768px) {
            nav { width: 100%; height: auto; position: relative; border-right: none; border-bottom: 1px solid #dee2e6; }
            main { margin-left: 0; }
            #firebase-status { margin-left: 15px; position: relative; top: 0; }
            section { padding: 20px; padding-top: 30px; }
            section h1.section-title { font-size: 1.5em; margin-bottom: 20px; }
            .oee-status-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
            .charts-grid { grid-template-columns: 1fr; }
            .chart-container { min-height: 300px; } .chart-container canvas { max-height: 250px; }
            .form-grid { grid-template-columns: 1fr; gap: 15px 0; }
            .production-form-container, .production-log-container { padding: 20px; }
            .toggle-view-btn { position: relative; margin-bottom: 15px; display: block; width: 100%; top: 0; right: 0; }
            .production-form-container h2, .production-log-container h2 { margin-bottom: 10px; font-size: 1.3em; }
            .label-preview { max-width: 90%; }
            /* table, thead, tbody, th, td, tr { display: block; }
            thead tr { position: absolute; top: -9999px; left: -9999px; }
            tr { border: 1px solid #dee2e6; margin-bottom: 10px; background-color: #fff; }
            td { border: none; border-bottom: 1px solid #eee; position: relative; padding-left: 50% !important; text-align: right !important; min-height: 40px; display: block; }
            td:before { position: absolute; top: 12px; left: 15px; width: 45%; padding-right: 10px; white-space: nowrap; content: attr(data-label); font-weight: bold; text-align: left; color: #495057; font-size: 0.9em; }
            td.status-message { padding-left: 15px !important; text-align: center !important; }
            td.status-message:before { display: none; }
            body.dark-mode tr { border-color: #495057; background-color: #2b3035; }
            body.dark-mode td { border-bottom-color: #495057; }
            body.dark-mode td:before { color: #adb5bd; } */
            /* .component-grid { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }
            .component-button { font-size: 1em; padding: 15px; }
            #labeling .label-toolbar { flex-direction: column; align-items: stretch; }
            #labeling .label-toolbar select, #labeling .label-toolbar button { width: 100%; margin: 5px 0; }
            #currently-selected-component { text-align: center; margin-top: 10px; } */
            .modal-content { width: 95%; max-height: 95vh; }
            #label-preview-modal .modal-body { grid-template-columns: 1fr; gap: 20px; }
            .label-actual-preview { min-height: 250px; }
            .label-actual-preview .label-text.vertical { font-size: 1.8em; }
            .history-filters { flex-direction: column; align-items: stretch; }
            .history-filters select, .history-filters input[type="date"], .history-filters button { width: 100%; }
            #troubleshooting .troubleshooting-container { padding: 20px; }
            #troubleshooting h2 { font-size: 1.4em; }
            #troubleshooting .troubleshooting-actions { flex-direction: column; }
            .sop-manager-layout { flex-direction: column; height: auto; }
            .sop-sidebar { width: 100%; height: auto; max-height: 40vh; border-right: none; border-bottom: 1px solid #dee2e6; }
            body.dark-mode .sop-sidebar { border-bottom-color: #495057; }
            .sop-viewer { padding: 20px; height: auto; }
            .sop-header { flex-direction: column; align-items: stretch; }
            .sop-header-actions { margin-top: 10px; }
            .sop-step-content { padding: 15px; }
            .sop-step-media img, .sop-step-media .pdf-placeholder { max-height: 300px; }
            #sop-editor-modal .modal-body { grid-template-columns: 1fr; }
            .sop-editor-preview { margin-top: 20px; }
        }

/* Importing Bootstrap SCSS file. */

::ng-deep .modal-dialog {
  display: flex;
  justify-content: center; // horizontal center
  align-items: center;     // vertical center
  min-height: 100vh;       // make full viewport height to allow vertical centering
  margin: 0;               // remove default margins
}